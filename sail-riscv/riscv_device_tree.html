<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style>.sail-id { color: black; }
.sail-keyword { font-weight: bold; color: maroon; }
.sail-kind { color: purple; }
.sail-comment { color: green; }
.sail-string { color: red; }
.sail-pragma { font-weight: bold; color: blue; }
.sail-internal { font-weight: bold; color: red; }
.sail-operator { color: maroon; }
.sail-literal { color: teal; }
.sail-ty-var { color: blue; }
#sail-html-columns { display: flex; width: 100%; }
#sail-html-lines { padding-left: 10px; padding-right: 10px; width: min-content; text-align: right; white-space: nowrap; }
#sail-html-source { padding-left: 10px; flex: 1; }
:target { background: yellow; }
</style>
</head>
<body>
<pre>
<div id="sail-html-columns">
<div id="sail-html-lines"><span id="L1">1</span><br /><span id="L2">2</span><br /><span id="L3">3</span><br /><span id="L4">4</span><br /><span id="L5">5</span><br /><span id="L6">6</span><br /><span id="L7">7</span><br /><span id="L8">8</span><br /><span id="L9">9</span><br /><span id="L10">10</span><br /><span id="L11">11</span><br /><span id="L12">12</span><br /><span id="L13">13</span><br /><span id="L14">14</span><br /><span id="L15">15</span><br /><span id="L16">16</span><br /><span id="L17">17</span><br /><span id="L18">18</span><br /><span id="L19">19</span><br /><span id="L20">20</span><br /><span id="L21">21</span><br /><span id="L22">22</span><br /><span id="L23">23</span><br /><span id="L24">24</span><br /><span id="L25">25</span><br /><span id="L26">26</span><br /><span id="L27">27</span><br /><span id="L28">28</span><br /><span id="L29">29</span><br /><span id="L30">30</span><br /><span id="L31">31</span><br /><span id="L32">32</span><br /><span id="L33">33</span><br /><span id="L34">34</span><br /><span id="L35">35</span><br /><span id="L36">36</span><br /><span id="L37">37</span><br /><span id="L38">38</span><br /><span id="L39">39</span><br /><span id="L40">40</span><br /><span id="L41">41</span><br /><span id="L42">42</span><br /><span id="L43">43</span><br /><span id="L44">44</span><br /><span id="L45">45</span><br /><span id="L46">46</span><br /><span id="L47">47</span><br /><span id="L48">48</span><br /><span id="L49">49</span><br /><span id="L50">50</span><br /><span id="L51">51</span><br /><span id="L52">52</span><br /><span id="L53">53</span><br /><span id="L54">54</span><br /><span id="L55">55</span><br /><span id="L56">56</span><br /><span id="L57">57</span><br /><span id="L58">58</span><br /><span id="L59">59</span><br /><span id="L60">60</span><br /><span id="L61">61</span><br /><span id="L62">62</span><br /><span id="L63">63</span><br /><span id="L64">64</span><br /><span id="L65">65</span><br /><span id="L66">66</span><br /><span id="L67">67</span><br /><span id="L68">68</span><br /><span id="L69">69</span><br /><span id="L70">70</span><br /><span id="L71">71</span><br /><span id="L72">72</span><br /><span id="L73">73</span><br /><span id="L74">74</span><br /><span id="L75">75</span><br /><span id="L76">76</span><br /><span id="L77">77</span><br /><span id="L78">78</span><br /><span id="L79">79</span><br /><span id="L80">80</span><br /><span id="L81">81</span><br /><span id="L82">82</span><br /><span id="L83">83</span><br /><span id="L84">84</span><br /><span id="L85">85</span><br /><span id="L86">86</span><br /><span id="L87">87</span><br /><span id="L88">88</span><br /><span id="L89">89</span><br /><span id="L90">90</span><br /><span id="L91">91</span><br /><span id="L92">92</span><br /><span id="L93">93</span><br /><span id="L94">94</span><br /><span id="L95">95</span><br /><span id="L96">96</span><br /><span id="L97">97</span><br /><span id="L98">98</span><br /><span id="L99">99</span><br /><span id="L100">100</span><br /><span id="L101">101</span><br /><span id="L102">102</span><br /><span id="L103">103</span><br /><span id="L104">104</span><br /><span id="L105">105</span><br /><span id="L106">106</span><br /><span id="L107">107</span><br /><span id="L108">108</span><br /><span id="L109">109</span><br /><span id="L110">110</span><br /><span id="L111">111</span><br /><span id="L112">112</span><br /><span id="L113">113</span><br /><span id="L114">114</span><br /><span id="L115">115</span><br /><span id="L116">116</span><br /><span id="L117">117</span><br /><span id="L118">118</span><br /><span id="L119">119</span><br /><span id="L120">120</span><br /><span id="L121">121</span><br /><span id="L122">122</span><br /><span id="L123">123</span><br /><span id="L124">124</span><br /><span id="L125">125</span><br /><span id="L126">126</span><br /><span id="L127">127</span><br /><span id="L128">128</span><br /><span id="L129">129</span><br /><span id="L130">130</span><br /><span id="L131">131</span><br /><span id="L132">132</span><br /><span id="L133">133</span><br /><span id="L134">134</span><br /><span id="L135">135</span><br /><span id="L136">136</span><br /><span id="L137">137</span><br /><span id="L138">138</span><br /><span id="L139">139</span><br /><span id="L140">140</span><br /><span id="L141">141</span><br /><span id="L142">142</span><br /><span id="L143">143</span><br /><span id="L144">144</span><br /><span id="L145">145</span><br /><span id="L146">146</span><br /><span id="L147">147</span><br /><span id="L148">148</span><br /><span id="L149">149</span><br /><span id="L150">150</span><br /><span id="L151">151</span><br /><span id="L152">152</span><br /><span id="L153">153</span><br /><span id="L154">154</span><br /><span id="L155">155</span><br /><span id="L156">156</span><br /><span id="L157">157</span><br /><span id="L158">158</span><br /><span id="L159">159</span><br /><span id="L160">160</span><br /><span id="L161">161</span><br /><span id="L162">162</span><br /><span id="L163">163</span><br /><span id="L164">164</span><br /><span id="L165">165</span><br /><span id="L166">166</span><br /><span id="L167">167</span><br /><span id="L168">168</span><br /><span id="L169">169</span><br /><span id="L170">170</span><br /><span id="L171">171</span><br /><span id="L172">172</span><br /><span id="L173">173</span><br /><span id="L174">174</span><br /><span id="L175">175</span><br /><span id="L176">176</span><br /><span id="L177">177</span><br /></div>
<div id="sail-html-source"><span class="sail-comment">/*=======================================================================================*/</span>
<span class="sail-comment">/*  This Sail RISC-V architecture model, comprising all files and                        */</span>
<span class="sail-comment">/*  directories except where otherwise noted is subject the BSD                          */</span>
<span class="sail-comment">/*  two-clause license in the LICENSE file.                                              */</span>
<span class="sail-comment">/*                                                                                       */</span>
<span class="sail-comment">/*  SPDX-License-Identifier: BSD-2-Clause                                                */</span>
<span class="sail-comment">/*=======================================================================================*/</span>

<span class="sail-comment">// Identifies the largest MMU address translation mode supported by this hart.
</span><span class="sail-keyword">function</span> <span class="sail-id">mmu_type</span>() -&gt; <span class="sail-id">string</span> = {
  <span class="sail-keyword">if</span> <span class="sail-id">xlen</span> <span class="sail-operator">==</span> <span class="sail-literal">32</span> <span class="sail-keyword">then</span> {
    <span class="sail-keyword">if</span> <a href=".././riscv_extensions.html#L20"><span class="sail-id">hartSupports</span></a>(<span class="sail-id">Ext_Sv32</span>) <span class="sail-keyword">then</span> <span class="sail-string">"sv32"</span> <span class="sail-keyword">else</span> <span class="sail-string">"none"</span>
  } <span class="sail-keyword">else</span> {
    <span class="sail-keyword">assert</span>(<span class="sail-id">xlen</span> <span class="sail-operator">==</span> <span class="sail-literal">64</span>);
    <span class="sail-keyword">if</span> <a href=".././riscv_extensions.html#L20"><span class="sail-id">hartSupports</span></a>(<span class="sail-id">Ext_Sv57</span>) <span class="sail-keyword">then</span> <span class="sail-string">"sv57"</span>
    <span class="sail-keyword">else</span> <span class="sail-keyword">if</span> <a href=".././riscv_extensions.html#L20"><span class="sail-id">hartSupports</span></a>(<span class="sail-id">Ext_Sv48</span>) <span class="sail-keyword">then</span> <span class="sail-string">"sv48"</span>
    <span class="sail-keyword">else</span> <span class="sail-keyword">if</span> <a href=".././riscv_extensions.html#L20"><span class="sail-id">hartSupports</span></a>(<span class="sail-id">Ext_Sv39</span>) <span class="sail-keyword">then</span> <span class="sail-string">"sv39"</span>
    <span class="sail-keyword">else</span> <span class="sail-string">"none"</span>
  }
}

<span class="sail-comment">// Generators for Device-Tree source corresponding to the model
</span><span class="sail-comment">// configuration.
</span><span class="sail-comment">// NOTE: These assume a valid model configuration.
</span>
<span class="sail-comment">// Generates the value for the "riscv,isa-base" property.
</span><span class="sail-keyword">function</span> <span class="sail-id">generate_isa_base</span>() -&gt; <span class="sail-id">string</span> = {
  <span class="sail-string">"rv"</span> <span class="sail-operator">^</span> <span class="sail-id">dec_str</span>(<span class="sail-id">xlen</span>) <span class="sail-operator">^</span> <span class="sail-string">"i"</span>
}

<span class="sail-comment">// Generates an ISA string in the appropriate format.
</span>
<span class="sail-keyword">enum</span> <span class="sail-id">ISA_Format</span> = {<span class="sail-id">Canonical_Lowercase</span>, <span class="sail-id">DeviceTree_ISA_Extensions</span>}

<span class="sail-comment">/* Some notes from the "ISA Extension Naming Convections" section of
   the manual; some aspects do not apply to the
   DeviceTree_ISA_Extensions generator.

  . The first letter following the "Z" conventionally indicates the
    most closely related alphabetical extension category,
    IMAFDQLCBKJTPVH.  If multiple "Z" extensions are named, they
    should be ordered first by category, then alphabetically within a
    categoryâ€”for example, "Zicsr_Zifencei_Ztso".

  . All multi-letter extensions, including those with the "Z" prefix, must be
    separated from other multi-letter extensions by an underscore, e.g.,
    "RV32IMACZicsr_Zifencei" (but see the next point).

  . An underscore between the single letter extensions and the first
    multi-letter extension is optional, e.g., "RV32IMAC_Zicsr_Zifencei".
    The canonical generator below includes it.

  . Standard supervisor-level extensions (prefixed with either 'Ss' or
    'Sv') should be listed after standard unprivileged extensions, and
    like other multi-letter extensions, must be separated from other
    multi-letter extensions by an underscore. If multiple
    supervisor-level extensions are listed, they should be ordered
    alphabetically.

  . Standard machine-level extensions (prefixed with the letters "Sm")
    should be listed after standard lesser-privileged extensions, and
    like other multi-letter extensions, must be separated from other
    multi-letter extensions by an underscore. If multiple
    machine-level extensions are listed, they should be ordered
    alphabetically.

  Once the Sail configuration supports extension version numbers, we could
  add them to the generated isa string.

  The device-tree specification for the ISA string is at:
  https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/devicetree/bindings/riscv/extensions.yaml

  As the above document uses lower-case, the generator below does too.
*/</span>

<span class="sail-keyword">function</span> <span class="sail-id">ext_wrap</span>(<span class="sail-id">ext</span> : <span class="sail-id">extension</span>, <span class="sail-id">fmt</span> : <span class="sail-id">ISA_Format</span>) -&gt; <span class="sail-id">string</span> = {
  <span class="sail-keyword">if</span> <a href=".././prelude.html#L29"><span class="sail-id">not</span></a>(<a href=".././riscv_extensions.html#L20"><span class="sail-id">hartSupports</span></a>(<span class="sail-id">ext</span>)) <span class="sail-keyword">then</span> <span class="sail-keyword">return</span> <span class="sail-string">""</span>;
  <span class="sail-keyword">let</span> <span class="sail-id">s</span> = <span class="sail-id">extensionName</span>(<span class="sail-id">ext</span>);
  <span class="sail-keyword">match</span> <span class="sail-id">fmt</span> {
    <span class="sail-id">Canonical_Lowercase</span> =&gt;
      <span class="sail-comment">// Single letter extensions are concatenated without a separator.
</span>      <span class="sail-keyword">if</span> <span class="sail-id">string_length</span>(<span class="sail-id">s</span>) <span class="sail-operator">==</span> <span class="sail-literal">1</span> <span class="sail-keyword">then</span> <span class="sail-id">s</span> <span class="sail-keyword">else</span> <span class="sail-string">"_"</span> <span class="sail-operator">^</span> <span class="sail-id">s</span>,
    <span class="sail-id">DeviceTree_ISA_Extensions</span> =&gt;
      <span class="sail-string">", \""</span> <span class="sail-operator">^</span> <span class="sail-id">s</span> <span class="sail-operator">^</span> <span class="sail-string">"\""</span>,
  }
}

<span class="sail-keyword">function</span> <span class="sail-id">generate_isa_string</span>(<span class="sail-id">fmt</span> : <span class="sail-id">ISA_Format</span>) -&gt; <span class="sail-id">string</span> = {
  <span class="sail-keyword">var</span> <span class="sail-id">isa_string</span> : <span class="sail-id">string</span> = <span class="sail-keyword">match</span> <span class="sail-id">fmt</span> {
    <span class="sail-id">Canonical_Lowercase</span> =&gt; <span class="sail-string">"rv"</span> <span class="sail-operator">^</span> <span class="sail-id">dec_str</span>(<span class="sail-id">xlen</span>) <span class="sail-operator">^</span> <span class="sail-string">"i"</span>,
    <span class="sail-id">DeviceTree_ISA_Extensions</span> =&gt; <span class="sail-string">"\"i\""</span>,
  };

  <span class="sail-comment">// The default Order dec means we start from the end
</span>  <span class="sail-keyword">foreach</span> (<span class="sail-id">i</span> <span class="sail-id">from</span> (<span class="sail-id">length</span>(<span class="sail-id">extensions_ordered_for_isa_string</span>) <span class="sail-operator">-</span> <span class="sail-literal">1</span>) <span class="sail-id">downto</span> <span class="sail-literal">0</span>)
    <span class="sail-id">isa_string</span> = <span class="sail-id">isa_string</span> <span class="sail-operator">^</span> <a href=".././riscv_device_tree.html#L76"><span class="sail-id">ext_wrap</span></a>(<span class="sail-id">extensions_ordered_for_isa_string</span>[<span class="sail-id">i</span>], <span class="sail-id">fmt</span>);

  <span class="sail-id">isa_string</span>
}

<span class="sail-comment">// Generates the full Device-Tree configuration for the model.
</span>
<span class="sail-keyword">function</span> <span class="sail-id">generate_dts</span>() -&gt; <span class="sail-id">string</span> = {
  <span class="sail-keyword">let</span> <span class="sail-id">clock_freq</span> : <span class="sail-id">nat</span> = <span class="sail-keyword">config</span> <span class="sail-id">platform</span>.<span class="sail-id">clock_frequency</span>;
  <span class="sail-keyword">let</span> <span class="sail-id">ram_base_hi</span> = <span class="sail-id">unsigned</span>(<a href=".././riscv_platform.html#L36"><span class="sail-id">plat_ram_base</span></a> <span class="sail-operator">&gt;&gt;</span> <span class="sail-literal">32</span>);
  <span class="sail-keyword">let</span> <span class="sail-id">ram_base_lo</span> = <span class="sail-id">unsigned</span>(<a href=".././riscv_platform.html#L36"><span class="sail-id">plat_ram_base</span></a>[<span class="sail-literal">31</span> .. <span class="sail-literal">0</span>]);
  <span class="sail-keyword">let</span> <span class="sail-id">ram_size_hi</span> = <span class="sail-id">unsigned</span>(<a href=".././riscv_platform.html#L37"><span class="sail-id">plat_ram_size</span></a> <span class="sail-operator">&gt;&gt;</span> <span class="sail-literal">32</span>);
  <span class="sail-keyword">let</span> <span class="sail-id">ram_size_lo</span> = <span class="sail-id">unsigned</span>(<a href=".././riscv_platform.html#L37"><span class="sail-id">plat_ram_size</span></a>[<span class="sail-literal">31</span> .. <span class="sail-literal">0</span>]);
  <span class="sail-keyword">let</span> <span class="sail-id">clint_base_hi</span> = <span class="sail-id">unsigned</span>(<a href=".././riscv_platform.html#L59"><span class="sail-id">plat_clint_base</span></a> <span class="sail-operator">&gt;&gt;</span> <span class="sail-literal">32</span>);
  <span class="sail-keyword">let</span> <span class="sail-id">clint_base_lo</span> = <span class="sail-id">unsigned</span>(<a href=".././riscv_platform.html#L59"><span class="sail-id">plat_clint_base</span></a>[<span class="sail-literal">31</span> .. <span class="sail-literal">0</span>]);
  <span class="sail-keyword">let</span> <span class="sail-id">clint_size_hi</span> = <span class="sail-id">unsigned</span>(<a href=".././riscv_platform.html#L60"><span class="sail-id">plat_clint_size</span></a> <span class="sail-operator">&gt;&gt;</span> <span class="sail-literal">32</span>);
  <span class="sail-keyword">let</span> <span class="sail-id">clint_size_lo</span> = <span class="sail-id">unsigned</span>(<a href=".././riscv_platform.html#L60"><span class="sail-id">plat_clint_size</span></a>[<span class="sail-literal">31</span> .. <span class="sail-literal">0</span>]);

  <span class="sail-comment">// `hex_str` is used for the unit-addresses of the `memory@` and `clint@` nodes
</span>  <span class="sail-comment">// instead of `hex_bits_str` since they cannot have leading zeros.  These addresses
</span>  <span class="sail-comment">// also cannot have a '0x' prefix which explains the `string_drop(., 2)`.
</span>
  <span class="sail-string">"/dts-v1/;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"/ {\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  #address-cells = &lt;2&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  #size-cells = &lt;2&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  compatible = \"ucbbar,spike-bare-dev\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  model = \"ucbbar,spike-bare\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  chosen {\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    bootargs = \"console=hvc0 earlycon=sbi\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  };\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  cpus {\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    #address-cells = &lt;1&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    #size-cells = &lt;0&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    timebase-frequency = &lt;"</span> <span class="sail-operator">^</span> <span class="sail-id">dec_str</span>(<span class="sail-id">clock_freq</span> <span class="sail-operator">/</span> <span class="sail-id">plat_insns_per_tick</span>) <span class="sail-operator">^</span> <span class="sail-string">"&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    CPU0: cpu@0 {\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      device_type = \"cpu\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      reg = &lt;0&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      status = \"okay\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      compatible = \"riscv\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      riscv,isa-base = \""</span> <span class="sail-operator">^</span> <a href=".././riscv_device_tree.html#L27"><span class="sail-id">generate_isa_base</span></a>() <span class="sail-operator">^</span> <span class="sail-string">"\";\n"</span>
         <span class="sail-comment">// NOTE: The "riscv,isa" property is marked deprecated but is
</span>         <span class="sail-comment">// probably still widely used.
</span><span class="sail-operator">^</span> <span class="sail-string">"      riscv,isa = \""</span> <span class="sail-operator">^</span> <a href=".././riscv_device_tree.html#L88"><span class="sail-id">generate_isa_string</span></a>(<span class="sail-id">Canonical_Lowercase</span>) <span class="sail-operator">^</span> <span class="sail-string">"\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      riscv,isa-extensions = "</span> <span class="sail-operator">^</span> <a href=".././riscv_device_tree.html#L88"><span class="sail-id">generate_isa_string</span></a>(<span class="sail-id">DeviceTree_ISA_Extensions</span>) <span class="sail-operator">^</span> <span class="sail-string">";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      mmu-type = \"riscv,"</span> <span class="sail-operator">^</span> <a href=".././riscv_device_tree.html#L10"><span class="sail-id">mmu_type</span></a>() <span class="sail-operator">^</span> <span class="sail-string">"\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      clock-frequency = &lt;"</span> <span class="sail-operator">^</span> <span class="sail-id">dec_str</span>(<span class="sail-id">clock_freq</span>) <span class="sail-operator">^</span> <span class="sail-string">"&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      CPU0_intc: interrupt-controller {\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"        #address-cells = &lt;2&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"        #interrupt-cells = &lt;1&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"        interrupt-controller;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"        compatible = \"riscv,cpu-intc\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      };\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    };\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  };\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  memory@"</span> <span class="sail-operator">^</span> <span class="sail-id">string_drop</span>(<span class="sail-id">hex_str</span>(<span class="sail-id">unsigned</span>(<a href=".././riscv_platform.html#L36"><span class="sail-id">plat_ram_base</span></a>)), <span class="sail-literal">2</span>) <span class="sail-operator">^</span> <span class="sail-string">" {\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    device_type = \"memory\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    reg = &lt;"</span> <span class="sail-operator">^</span> <span class="sail-id">hex_str</span>(<span class="sail-id">ram_base_hi</span>) <span class="sail-operator">^</span> <span class="sail-string">" "</span> <span class="sail-operator">^</span> <span class="sail-id">hex_str</span>(<span class="sail-id">ram_base_lo</span>)
<span class="sail-operator">^</span> <span class="sail-string">" "</span> <span class="sail-operator">^</span> <span class="sail-id">hex_str</span>(<span class="sail-id">ram_size_hi</span>) <span class="sail-operator">^</span> <span class="sail-string">" "</span> <span class="sail-operator">^</span> <span class="sail-id">hex_str</span>(<span class="sail-id">ram_size_lo</span>) <span class="sail-operator">^</span> <span class="sail-string">"&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  };\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  soc {\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    #address-cells = &lt;2&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    #size-cells = &lt;2&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    compatible = \"ucbbar,spike-bare-soc\", \"simple-bus\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    ranges;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    clint@"</span> <span class="sail-operator">^</span> <span class="sail-id">string_drop</span>(<span class="sail-id">hex_str</span>(<span class="sail-id">unsigned</span>(<a href=".././riscv_platform.html#L59"><span class="sail-id">plat_clint_base</span></a>)), <span class="sail-literal">2</span>) <span class="sail-operator">^</span> <span class="sail-string">" {\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      compatible = \"riscv,clint0\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      interrupts-extended = &lt;&amp;CPU0_intc 3 &amp;CPU0_intc 7&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"      reg = &lt;"</span> <span class="sail-operator">^</span> <span class="sail-id">hex_str</span>(<span class="sail-id">clint_base_hi</span>) <span class="sail-operator">^</span> <span class="sail-string">" "</span> <span class="sail-operator">^</span> <span class="sail-id">hex_str</span>(<span class="sail-id">clint_base_lo</span>)
<span class="sail-operator">^</span> <span class="sail-string">" "</span> <span class="sail-operator">^</span> <span class="sail-id">hex_str</span>(<span class="sail-id">clint_size_hi</span>) <span class="sail-operator">^</span> <span class="sail-string">" "</span> <span class="sail-operator">^</span> <span class="sail-id">hex_str</span>(<span class="sail-id">clint_size_lo</span>) <span class="sail-operator">^</span> <span class="sail-string">"&gt;;\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    };\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  };\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  htif {\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"    compatible = \"ucb,htif0\";\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"  };\n"</span>
<span class="sail-operator">^</span> <span class="sail-string">"};\n"</span>
}

<span class="sail-comment">// Generate a canonical ISA string for the configuration.
</span><span class="sail-keyword">function</span> <span class="sail-id">generate_canonical_isa_string</span>() -&gt; <span class="sail-id">string</span> =
  <a href=".././riscv_device_tree.html#L88"><span class="sail-id">generate_isa_string</span></a>(<span class="sail-id">Canonical_Lowercase</span>)
</pre>
</div>
</div>
</body>
</html>