<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>riscv_pc_access</title></head>
<body>
<code style="display: block">
/*&nbsp;accessors&nbsp;for&nbsp;default&nbsp;architectural&nbsp;addresses,&nbsp;for&nbsp;use&nbsp;from&nbsp;within&nbsp;instructions&nbsp;*/<br>
<br>
/*!<br>
&nbsp;&nbsp;Retrieves&nbsp;the&nbsp;architectural&nbsp;PC&nbsp;value.&nbsp;This&nbsp;is&nbsp;not&nbsp;necessarily&nbsp;the&nbsp;value<br>
&nbsp;&nbsp;found&nbsp;in&nbsp;the&nbsp;PC&nbsp;register&nbsp;as&nbsp;extensions&nbsp;may&nbsp;choose&nbsp;to&nbsp;override&nbsp;this&nbsp;function.<br>
&nbsp;&nbsp;The&nbsp;value&nbsp;in&nbsp;the&nbsp;PC&nbsp;register&nbsp;is&nbsp;the&nbsp;absolute&nbsp;virtual&nbsp;address&nbsp;of&nbsp;the&nbsp;instruction<br>
&nbsp;&nbsp;to&nbsp;fetch.<br>
&nbsp;*/<br>
val&nbsp;get_arch_pc&nbsp;:&nbsp;unit&nbsp;-&gt;&nbsp;xlenbits&nbsp;effect&nbsp;{rreg}<br>
function&nbsp;get_arch_pc()&nbsp;=&nbsp;PC<br>
<br>
val&nbsp;get_next_pc&nbsp;:&nbsp;unit&nbsp;-&gt;&nbsp;xlenbits&nbsp;effect&nbsp;{rreg}<br>
function&nbsp;get_next_pc()&nbsp;=&nbsp;nextPC<br>
<br>
val&nbsp;set_next_pc&nbsp;:&nbsp;xlenbits&nbsp;-&gt;&nbsp;unit&nbsp;effect&nbsp;{wreg}<br>
function&nbsp;set_next_pc(pc)&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;nextPC&nbsp;=&nbsp;pc<br>
}</span><br>
<br>
val&nbsp;tick_pc&nbsp;:&nbsp;unit&nbsp;-&gt;&nbsp;unit&nbsp;effect&nbsp;{rreg,&nbsp;wreg}<br>
function&nbsp;tick_pc()&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;PC&nbsp;=&nbsp;nextPC<br>
}</span><br>
</code>
</body>
</html>