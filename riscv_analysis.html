<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>riscv_analysis</title></head>
<body>
<code style="display: block">
$include&nbsp;&lt;regfp.sail&gt;<br>
<br>
/*&nbsp;in&nbsp;reverse&nbsp;order&nbsp;because&nbsp;inc&nbsp;vectors&nbsp;don't&nbsp;seem&nbsp;to&nbsp;work&nbsp;(bug)&nbsp;*/<br>
let&nbsp;GPRstrs&nbsp;:&nbsp;vector(32,&nbsp;dec,&nbsp;string)&nbsp;=&nbsp;[&nbsp;&quot;x31&quot;,&nbsp;&quot;x30&quot;,&nbsp;&quot;x29&quot;,&nbsp;&quot;x28&quot;,&nbsp;&quot;x27&quot;,&nbsp;&quot;x26&quot;,&nbsp;&quot;x25&quot;,&nbsp;&quot;x24&quot;,&nbsp;&quot;x23&quot;,&nbsp;&quot;x22&quot;,&nbsp;&quot;x21&quot;,<br>
&nbsp;&nbsp;&quot;x20&quot;,&nbsp;&quot;x19&quot;,&nbsp;&quot;x18&quot;,&nbsp;&quot;x17&quot;,&nbsp;&quot;x16&quot;,&nbsp;&quot;x15&quot;,&nbsp;&quot;x14&quot;,&nbsp;&quot;x13&quot;,&nbsp;&quot;x12&quot;,&nbsp;&quot;x11&quot;,<br>
&nbsp;&nbsp;&quot;x10&quot;,&nbsp;&quot;x9&quot;,&nbsp;&quot;x8&quot;,&nbsp;&quot;x7&quot;,&nbsp;&quot;x6&quot;,&nbsp;&quot;x5&quot;,&nbsp;&quot;x4&quot;,&nbsp;&quot;x3&quot;,&nbsp;&quot;x2&quot;,&nbsp;&quot;x1&quot;,&nbsp;&quot;x0&quot;<br>
&nbsp;&nbsp;]<br>
<br>
function&nbsp;GPRstr(i:&nbsp;bits(5))&nbsp;-&gt;&nbsp;string&nbsp;=&nbsp;GPRstrs[unsigned(i)]<br>
<br>
let&nbsp;CIA_fp&nbsp;=&nbsp;RFull(&quot;CIA&quot;)<br>
let&nbsp;NIA_fp&nbsp;=&nbsp;RFull(&quot;NIA&quot;)<br>
<br>
$ifndef&nbsp;FEATURE_UNION_BARRIER<br>
<br>
function&nbsp;initial_analysis&nbsp;(instr:ast)&nbsp;-&gt;&nbsp;(regfps,regfps,regfps,niafps,diafp,instruction_kind)&nbsp;=&nbsp;{<br>
&nbsp;&nbsp;iR&nbsp;=&nbsp;[|&nbsp;|]&nbsp;:&nbsp;regfps;<br>
&nbsp;&nbsp;oR&nbsp;=&nbsp;[|&nbsp;|]&nbsp;:&nbsp;regfps;<br>
&nbsp;&nbsp;aR&nbsp;=&nbsp;[|&nbsp;|]&nbsp;:&nbsp;regfps;<br>
&nbsp;&nbsp;ik&nbsp;=&nbsp;IK_simple()&nbsp;:&nbsp;instruction_kind;<br>
&nbsp;&nbsp;Nias&nbsp;=&nbsp;[|&nbsp;NIAFP_successor()&nbsp;|]&nbsp;:&nbsp;niafps;<br>
&nbsp;&nbsp;Dia&nbsp;=&nbsp;DIAFP_none()&nbsp;:&nbsp;diafp;<br>
<br>
&nbsp;&nbsp;match&nbsp;instr&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EBREAK()&nbsp;=&gt;&nbsp;(),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UTYPE(imm,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RISCV_JAL(imm,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;offset&nbsp;:&nbsp;bits(64)&nbsp;=&nbsp;EXTS(imm)&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nias&nbsp;=&nbsp;[|&nbsp;NIAFP_concrete_address&nbsp;(PC&nbsp;+&nbsp;offset)&nbsp;|];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;IK_branch();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RISCV_JALR(imm,&nbsp;rs,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;offset&nbsp;:&nbsp;bits(64)&nbsp;=&nbsp;EXTS(imm)&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nias&nbsp;=&nbsp;[|&nbsp;NIAFP_indirect_address()&nbsp;|];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;IK_branch();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BTYPE(imm,&nbsp;rs2,&nbsp;rs1,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;IK_branch();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;offset&nbsp;:&nbsp;bits(64)&nbsp;=&nbsp;EXTS(imm)&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nias&nbsp;=&nbsp;[|&nbsp;NIAFP_concrete_address(PC&nbsp;+&nbsp;offset),&nbsp;NIAFP_successor()&nbsp;|];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ITYPE(imm,&nbsp;rs,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SHIFTIOP(imm,&nbsp;rs,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RTYPE(rs2,&nbsp;rs1,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSR(csr,&nbsp;rs1,&nbsp;rd,&nbsp;is_imm,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;isWrite&nbsp;:&nbsp;bool&nbsp;=&nbsp;match&nbsp;op&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSRRW&nbsp;&nbsp;=&gt;&nbsp;true,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;if&nbsp;is_imm&nbsp;then&nbsp;unsigned(rs1)&nbsp;!=&nbsp;0&nbsp;else&nbsp;unsigned(rs1)&nbsp;!=&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iR&nbsp;=&nbsp;RFull(csr_name(csr))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~(is_imm)&nbsp;then&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isWrite&nbsp;then&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oR&nbsp;=&nbsp;RFull(csr_name(csr))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOAD(imm,&nbsp;rs,&nbsp;rd,&nbsp;unsign,&nbsp;width,&nbsp;aq,&nbsp;rl)&nbsp;=&gt;&nbsp;{&nbsp;/*&nbsp;XXX&nbsp;&quot;unsigned&quot;&nbsp;causes&nbsp;name&nbsp;conflict&nbsp;in&nbsp;lem&nbsp;shallow&nbsp;embedding...&nbsp;*/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aR&nbsp;=&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;(aq,&nbsp;rl)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_plain),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_RISCV_acquire),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_RISCV_strong_acquire),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;&nbsp;=&gt;&nbsp;internal_error(&quot;LOAD&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STORE(imm,&nbsp;rs2,&nbsp;rs1,&nbsp;width,&nbsp;aq,&nbsp;rl)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;aR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;aR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;(aq,&nbsp;rl)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_plain),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_RISCV_release),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_RISCV_strong_release),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;internal_error(&quot;STORE&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ADDIW(imm,&nbsp;rs,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SHIFTW(imm,&nbsp;rs,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RTYPEW(rs2,&nbsp;rs1,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FENCE(pred,&nbsp;succ)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;(pred,&nbsp;succ)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_rw_rw),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_r_rw),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_r_r),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_rw_w),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_w_w),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_w_rw),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_rw_r),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_r_w),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_w_r),<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b00,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b00)&nbsp;=&gt;&nbsp;IK_simple&nbsp;(),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;internal_error(&quot;barrier&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FENCE_TSO(pred,&nbsp;succ)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;(pred,&nbsp;succ)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_tso),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;internal_error(&quot;barrier&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FENCEI()&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;IK_simple&nbsp;();&nbsp;//&nbsp;for&nbsp;RMEM,&nbsp;should&nbsp;morally&nbsp;be&nbsp;Barrier_RISCV_i<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOADRES(aq,&nbsp;rl,&nbsp;rs1,&nbsp;width,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aR&nbsp;=&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;match&nbsp;(aq,&nbsp;rl)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_RISCV_reserved),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_RISCV_reserved_acquire),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_RISCV_reserved_strong_acquire),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;internal_error(&quot;LOADRES&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STORECON(aq,&nbsp;rl,&nbsp;rs2,&nbsp;rs1,&nbsp;width,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;aR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;aR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;match&nbsp;(aq,&nbsp;rl)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_RISCV_conditional),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_RISCV_conditional_release),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_RISCV_conditional_strong_release),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;false)&nbsp;=&gt;&nbsp;internal_error(&quot;STORECON&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AMO(op,&nbsp;aq,&nbsp;rl,&nbsp;rs2,&nbsp;rs1,&nbsp;width,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;aR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;aR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;match&nbsp;(aq,&nbsp;rl)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_rmw&nbsp;(Read_RISCV_reserved,&nbsp;Write_RISCV_conditional),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_rmw&nbsp;(Read_RISCV_reserved,&nbsp;Write_RISCV_conditional_release),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_rmw&nbsp;(Read_RISCV_reserved_acquire,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Write_RISCV_conditional),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_rmw&nbsp;(Read_RISCV_reserved_acquire,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Write_RISCV_conditional_release)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;()<br>
&nbsp;&nbsp;};<br>
&nbsp;&nbsp;(iR,oR,aR,Nias,Dia,ik)<br>
}<br>
<br>
$else<br>
<br>
function&nbsp;initial_analysis&nbsp;(instr:ast)&nbsp;-&gt;&nbsp;(regfps,regfps,regfps,niafps,diafp,instruction_kind)&nbsp;=&nbsp;{<br>
&nbsp;&nbsp;iR&nbsp;=&nbsp;[|&nbsp;|]&nbsp;:&nbsp;regfps;<br>
&nbsp;&nbsp;oR&nbsp;=&nbsp;[|&nbsp;|]&nbsp;:&nbsp;regfps;<br>
&nbsp;&nbsp;aR&nbsp;=&nbsp;[|&nbsp;|]&nbsp;:&nbsp;regfps;<br>
&nbsp;&nbsp;ik&nbsp;=&nbsp;IK_simple()&nbsp;:&nbsp;instruction_kind;<br>
&nbsp;&nbsp;Nias&nbsp;=&nbsp;[|&nbsp;NIAFP_successor()&nbsp;|]&nbsp;:&nbsp;niafps;<br>
&nbsp;&nbsp;Dia&nbsp;=&nbsp;DIAFP_none()&nbsp;:&nbsp;diafp;<br>
<br>
&nbsp;&nbsp;match&nbsp;instr&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EBREAK()&nbsp;=&gt;&nbsp;(),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UTYPE(imm,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RISCV_JAL(imm,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;offset&nbsp;:&nbsp;bits(64)&nbsp;=&nbsp;EXTS(imm)&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nias&nbsp;=&nbsp;[|&nbsp;NIAFP_concrete_address&nbsp;(PC&nbsp;+&nbsp;offset)&nbsp;|];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;IK_branch();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RISCV_JALR(imm,&nbsp;rs,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;offset&nbsp;:&nbsp;bits(64)&nbsp;=&nbsp;EXTS(imm)&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nias&nbsp;=&nbsp;[|&nbsp;NIAFP_indirect_address()&nbsp;|];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;IK_branch();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BTYPE(imm,&nbsp;rs2,&nbsp;rs1,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;IK_branch();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;offset&nbsp;:&nbsp;bits(64)&nbsp;=&nbsp;EXTS(imm)&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nias&nbsp;=&nbsp;[|&nbsp;NIAFP_concrete_address(PC&nbsp;+&nbsp;offset),&nbsp;NIAFP_successor()&nbsp;|];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ITYPE(imm,&nbsp;rs,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SHIFTIOP(imm,&nbsp;rs,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RTYPE(rs2,&nbsp;rs1,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSR(csr,&nbsp;rs1,&nbsp;rd,&nbsp;is_imm,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;isWrite&nbsp;:&nbsp;bool&nbsp;=&nbsp;match&nbsp;op&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSRRW&nbsp;&nbsp;=&gt;&nbsp;true,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;if&nbsp;is_imm&nbsp;then&nbsp;unsigned(rs1)&nbsp;!=&nbsp;0&nbsp;else&nbsp;unsigned(rs1)&nbsp;!=&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iR&nbsp;=&nbsp;RFull(csr_name(csr))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~(is_imm)&nbsp;then&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isWrite&nbsp;then&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oR&nbsp;=&nbsp;RFull(csr_name(csr))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOAD(imm,&nbsp;rs,&nbsp;rd,&nbsp;unsign,&nbsp;width,&nbsp;aq,&nbsp;rl)&nbsp;=&gt;&nbsp;{&nbsp;/*&nbsp;XXX&nbsp;&quot;unsigned&quot;&nbsp;causes&nbsp;name&nbsp;conflict&nbsp;in&nbsp;lem&nbsp;shallow&nbsp;embedding...&nbsp;*/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aR&nbsp;=&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;(aq,&nbsp;rl)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_plain),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_RISCV_acquire),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_RISCV_strong_acquire),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;&nbsp;=&gt;&nbsp;internal_error(&quot;LOAD&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STORE(imm,&nbsp;rs2,&nbsp;rs1,&nbsp;width,&nbsp;aq,&nbsp;rl)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;aR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;aR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;(aq,&nbsp;rl)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_plain),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_RISCV_release),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_RISCV_strong_release),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;internal_error(&quot;STORE&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ADDIW(imm,&nbsp;rs,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SHIFTW(imm,&nbsp;rs,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RTYPEW(rs2,&nbsp;rs1,&nbsp;rd,&nbsp;op)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FENCE(pred,&nbsp;succ)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;(pred,&nbsp;succ)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_rw_rw&nbsp;()),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_r_rw&nbsp;()),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_r_r&nbsp;()),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_rw_w&nbsp;()),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_w_w&nbsp;()),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_w_rw&nbsp;()),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_rw_r&nbsp;()),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_r_w&nbsp;()),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b01,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b10)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_w_r&nbsp;()),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b00,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b00)&nbsp;=&gt;&nbsp;IK_simple&nbsp;(),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;internal_error(&quot;barrier&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FENCE_TSO(pred,&nbsp;succ)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;(pred,&nbsp;succ)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11,&nbsp;_&nbsp;:&nbsp;bits(2)&nbsp;@&nbsp;0b11)&nbsp;=&gt;&nbsp;IK_barrier&nbsp;(Barrier_RISCV_tso&nbsp;()),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;internal_error(&quot;barrier&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FENCEI()&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;IK_simple&nbsp;();&nbsp;//&nbsp;for&nbsp;RMEM,&nbsp;should&nbsp;morally&nbsp;be&nbsp;Barrier_RISCV_i<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOADRES(aq,&nbsp;rl,&nbsp;rs1,&nbsp;width,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aR&nbsp;=&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;match&nbsp;(aq,&nbsp;rl)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_RISCV_reserved),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_RISCV_reserved_acquire),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_read&nbsp;(Read_RISCV_reserved_strong_acquire),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;internal_error(&quot;LOADRES&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STORECON(aq,&nbsp;rl,&nbsp;rs2,&nbsp;rs1,&nbsp;width,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;aR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;aR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;match&nbsp;(aq,&nbsp;rl)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_RISCV_conditional),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_RISCV_conditional_release),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_write&nbsp;(Write_RISCV_conditional_strong_release),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;false)&nbsp;=&gt;&nbsp;internal_error(&quot;STORECON&nbsp;type&nbsp;not&nbsp;implemented&nbsp;in&nbsp;initial_analysis&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AMO(op,&nbsp;aq,&nbsp;rl,&nbsp;rs2,&nbsp;rs1,&nbsp;width,&nbsp;rd)&nbsp;=&gt;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs2&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs2))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;iR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;iR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rs1&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;aR&nbsp;=&nbsp;RFull(GPRstr(rs1))&nbsp;::&nbsp;aR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rd&nbsp;==&nbsp;0b00000)&nbsp;then&nbsp;()&nbsp;else&nbsp;oR&nbsp;=&nbsp;RFull(GPRstr(rd))&nbsp;::&nbsp;oR;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik&nbsp;=&nbsp;match&nbsp;(aq,&nbsp;rl)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_rmw&nbsp;(Read_RISCV_reserved,&nbsp;Write_RISCV_conditional),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(false,&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_rmw&nbsp;(Read_RISCV_reserved,&nbsp;Write_RISCV_conditional_release),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;false)&nbsp;=&gt;&nbsp;IK_mem_rmw&nbsp;(Read_RISCV_reserved_acquire,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Write_RISCV_conditional),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true,&nbsp;&nbsp;true)&nbsp;&nbsp;=&gt;&nbsp;IK_mem_rmw&nbsp;(Read_RISCV_reserved_acquire,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Write_RISCV_conditional_release)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;()<br>
&nbsp;&nbsp;};<br>
&nbsp;&nbsp;(iR,oR,aR,Nias,Dia,ik)<br>
}<br>
<br>
$endif<br>
</code>
</body>
</html>